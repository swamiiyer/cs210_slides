import slideutils, sys

def trace1():
    B, Y, X = 'grape300', 'banana300', ''
    T, F = True, False
    A = [[('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [('T', X, T), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [('T', Y, T), ('U', Y, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [('T', X, T), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [('T', Y, T), ('U', X, F), ('R', Y, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [('T', X, F), ('U', X, F), ('R', X, T), ('I', X, F), ('N', X, F), ('G', X, F)],
         [('T', X, F), ('U', X, F), ('R', Y, T), ('I', Y, F), ('N', X, F), ('G', X, F)],
         [('T', X, F), ('U', X, F), ('R', X, F), ('I', X, T), ('N', X, F), ('G', X, F)],
         [('T', X, F), ('U', X, F), ('R', X, F), ('I', Y, T), ('N', Y, F), ('G', X, F)],
         [('T', X, F), ('U', X, F), ('R', X, F), ('I', X, T), ('N', X, F), ('G', X, F)],
         [('T', X, F), ('U', X, F), ('R', X, F), ('I', Y, T), ('N', X, F), ('G', Y, F)],
         [('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, T)],
         [('T', Y, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', Y, T)],
         [('G', B, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [('G', B, F), ('U', X, T), ('R', X, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [('G', B, F), ('U', Y, T), ('R', Y, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [('G', B, F), ('U', X, F), ('R', X, T), ('I', X, F), ('N', X, F), ('T', X, F)],
         [('G', B, F), ('U', X, F), ('R', Y, T), ('I', Y, F), ('N', X, F), ('T', X, F)],
         [('G', B, F), ('U', X, F), ('R', X, F), ('I', X, T), ('N', X, F), ('T', X, F)],
         [('G', B, F), ('U', X, F), ('R', X, F), ('I', Y, T), ('N', Y, F), ('T', X, F)],
         [('G', B, F), ('U', X, F), ('R', X, F), ('I', X, T), ('N', X, F), ('T', X, F)],
         [('G', B, F), ('U', X, F), ('R', X, F), ('I', Y, T), ('N', X, F), ('T', Y, F)],
         [('G', B, F), ('U', X, F), ('R', X, F), ('I', X, T), ('N', X, F), ('T', X, F)],
         [('G', B, F), ('U', Y, F), ('R', X, F), ('I', Y, T), ('N', X, F), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('R', X, F), ('U', X, F), ('N', X, F), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('R', X, T), ('U', X, F), ('N', X, F), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('R', Y, T), ('U', Y, F), ('N', X, F), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('R', X, T), ('U', X, F), ('N', X, F), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('R', Y, T), ('U', X, F), ('N', Y, F), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('R', X, F), ('U', X, F), ('N', X, T), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('R', X, F), ('U', X, F), ('N', Y, T), ('T', Y, F)],
         [('G', B, F), ('I', B, F), ('R', X, F), ('U', X, F), ('N', X, T), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('R', Y, F), ('U', X, F), ('N', Y, T), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('U', X, F), ('R', X, F), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('U', X, T), ('R', X, F), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('U', Y, T), ('R', Y, F), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('U', X, F), ('R', X, T), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('U', X, F), ('R', Y, T), ('T', Y, F)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('U', X, F), ('R', X, T), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('U', Y, F), ('R', Y, T), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('U', X, F), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('U', X, T), ('T', X, F)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('U', Y, T), ('T', Y, F)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('U', X, F), ('T', X, T)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('U', Y, F), ('T', Y, T)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('T', B, F), ('U', X, F)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('T', B, F), ('U', X, T)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('T', B, F), ('U', Y, T)],
         [('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('T', B, F), ('U', B, F)],
         ]
    tex = '\\begin{overprint}\n'
    for i, a in enumerate(A):
        tex += '\onslide<%d|handout:%d>\n' %(i + 1, i + 1)
        tex += '\\begin{center}\n'
        tex += slideutils.trace(6, None, a)
        tex += '\end{center}\n'
    tex += '\end{overprint}\n'
    return tex

def trace2():
    B, Y, X = 'grape300', 'banana300', ''
    T, F = True, False
    CODE = """    public static void sort(Comparable[] a) {
        int n = a.length;
        for (int i = 0; i < n; i++) {
            int min = i;
            for (int j = i + 1; j < n; j++) {
                if (less(a[j], a[min])) {
                    min = j;
                }
            }
            exchange(a, i, min);
        }
    }"""
    VARS = [('i', 1), ('min', 1), ('j', 1), ('a', 6)]
    A = [[[], ('', X, F), ('', X, F), ('', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(1, 1)], ('', X, F), ('', X, F), ('', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(2, 2)], ('', X, F), ('', X, F), ('', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(3, 3)], ('0', X, F), ('', X, F), ('', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(4, 4)], ('0', X, F), ('0', X, F), ('', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(5, 5)], ('0', X, F), ('0', X, F), ('1', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(6, 6)], ('0', X, F), ('0', X, F), ('1', X, F), ('T', Y, F), ('U', Y, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(5, 5)], ('0', X, F), ('0', X, F), ('2', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(6, 6)], ('0', X, F), ('0', X, F), ('2', X, F), ('T', Y, F), ('U', X, F), ('R', Y, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(7, 7)], ('0', X, F), ('2', X, F), ('2', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(5, 5)], ('0', X, F), ('2', X, F), ('3', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(6, 6)], ('0', X, F), ('2', X, F), ('3', X, F), ('T', X, F), ('U', X, F), ('R', Y, F), ('I', Y, F), ('N', X, F), ('G', X, F)],
         [[(7, 7)], ('0', X, F), ('3', X, F), ('3', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(5, 5)], ('0', X, F), ('3', X, F), ('4', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(6, 6)], ('0', X, F), ('3', X, F), ('4', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', Y, F), ('N', Y, F), ('G', X, F)],
         [[(5, 5)], ('0', X, F), ('3', X, F), ('5', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(6, 6)], ('0', X, F), ('3', X, F), ('5', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', Y, F), ('N', X, F), ('G', Y, F)],
         [[(7, 7)], ('0', X, F), ('5', X, F), ('5', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],
         [[(5, 5)], ('0', X, F), ('5', X, F), ('6', X, F), ('T', X, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', X, F)],         
         [[(10, 10)], ('0', X, F), ('5', X, F), ('', X, F), ('T', Y, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('G', Y, F)],
         [[(10, 10)], ('0', X, F), ('5', X, F), ('', X, F), ('G', B, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [[(3, 3)], ('1', X, F), ('', X, F), ('', X, F), ('G', B, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [[(4, 4)], ('1', X, F), ('1', X, F), ('', X, F), ('G', B, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [[(5, 5)], ('1', X, F), ('1', X, F), ('2', X, F), ('G', B, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [[(6, 6)], ('1', X, F), ('1', X, F), ('2', X, F), ('G', B, F), ('U', Y, F), ('R', Y, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [[(7, 7)], ('1', X, F), ('2', X, F), ('2', X, F), ('G', B, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [[(5, 5)], ('1', X, F), ('2', X, F), ('3', X, F), ('G', B, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [[(6, 6)], ('1', X, F), ('2', X, F), ('3', X, F), ('G', B, F), ('U', X, F), ('R', Y, F), ('I', Y, F), ('N', X, F), ('T', X, F)],
         [[(7, 7)], ('1', X, F), ('3', X, F), ('3', X, F), ('G', B, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [[(5, 5)], ('1', X, F), ('3', X, F), ('4', X, F), ('G', B, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [[(6, 6)], ('1', X, F), ('3', X, F), ('4', X, F), ('G', B, F), ('U', X, F), ('R', X, F), ('I', Y, F), ('N', Y, F), ('T', X, F)],
         [[(5, 5)], ('1', X, F), ('3', X, F), ('5', X, F), ('G', B, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [[(6, 6)], ('1', X, F), ('3', X, F), ('5', X, F), ('G', B, F), ('U', X, F), ('R', X, F), ('I', Y, F), ('N', X, F), ('T', Y, F)],
         [[(5, 5)], ('1', X, F), ('3', X, F), ('6', X, F), ('G', B, F), ('U', X, F), ('R', X, F), ('I', X, F), ('N', X, F), ('T', X, F)],
         [[(10, 10)], ('1', X, F), ('3', X, F), ('', X, F), ('G', B, F), ('U', Y, F), ('R', X, F), ('I', Y, F), ('N', X, F), ('T', X, F)],
         [[(10, 10)], ('1', X, F), ('3', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('R', X, F), ('U', X, F), ('N', X, F), ('T', X, F)],
         [[(3, 3)], ('2', X, F), ('', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('R', X, F), ('U', X, F), ('N', X, F), ('T', X, F)],
         [[(4, 4)], ('2', X, F), ('2', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('R', X, F), ('U', X, F), ('N', X, F), ('T', X, F)],
         [[(5, 5)], ('2', X, F), ('2', X, F), ('3', X, F), ('G', B, F), ('I', B, F), ('R', X, F), ('U', X, F), ('N', X, F), ('T', X, F)],
         [[(6, 6)], ('2', X, F), ('2', X, F), ('3', X, F), ('G', B, F), ('I', B, F), ('R', Y, F), ('U', Y, F), ('N', X, F), ('T', X, F)],
         [[(5, 5)], ('2', X, F), ('2', X, F), ('4', X, F), ('G', B, F), ('I', B, F), ('R', X, F), ('U', X, F), ('N', X, F), ('T', X, F)],
         [[(6, 6)], ('2', X, F), ('2', X, F), ('4', X, F), ('G', B, F), ('I', B, F), ('R', Y, F), ('U', X, F), ('N', Y, F), ('T', X, F)],
         [[(7, 7)], ('2', X, F), ('4', X, F), ('4', X, F), ('G', B, F), ('I', B, F), ('R', X, F), ('U', X, F), ('N', X, F), ('T', X, F)],
         [[(5, 5)], ('2', X, F), ('4', X, F), ('5', X, F), ('G', B, F), ('I', B, F), ('R', X, F), ('U', X, F), ('N', X, F), ('T', X, F)],
         [[(6, 6)], ('2', X, F), ('4', X, F), ('5', X, F), ('G', B, F), ('I', B, F), ('R', X, F), ('U', X, F), ('N', Y, F), ('T', Y, F)],
         [[(5, 5)], ('2', X, F), ('4', X, F), ('6', X, F), ('G', B, F), ('I', B, F), ('R', X, F), ('U', X, F), ('N', X, F), ('T', X, F)],
         [[(10, 10)], ('2', X, F), ('4', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('R', Y, F), ('U', X, F), ('N', Y, F), ('T', X, F)],
         [[(10, 10)], ('2', X, F), ('4', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('U', X, F), ('R', X, F), ('T', X, F)],
         [[(3, 3)], ('3', X, F), ('', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('U', X, F), ('R', X, F), ('T', X, F)],
         [[(4, 4)], ('3', X, F), ('3', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('U', X, F), ('R', X, F), ('T', X, F)],
         [[(5, 5)], ('3', X, F), ('3', X, F), ('4', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('U', X, F), ('R', X, F), ('T', X, F)],
         [[(6, 6)], ('3', X, F), ('3', X, F), ('4', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('U', Y, F), ('R', Y, F), ('T', X, F)],
         [[(7, 7)], ('3', X, F), ('4', X, F), ('4', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('U', X, F), ('R', X, F), ('T', X, F)],
         [[(5, 5)], ('3', X, F), ('4', X, F), ('5', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('U', X, F), ('R', X, F), ('T', X, F)],
         [[(6, 6)], ('3', X, F), ('4', X, F), ('5', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('U', X, F), ('R', Y, F), ('T', Y, F)],
         [[(5, 5)], ('3', X, F), ('4', X, F), ('6', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('U', X, F), ('R', X, F), ('T', X, F)],
         [[(10, 10)], ('3', X, F), ('4', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('U', Y, F), ('R', Y, F), ('T', X, F)],
         [[(10, 10)], ('3', X, F), ('4', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('U', X, F), ('T', X, F)],
         [[(3, 3)], ('4', X, F), ('', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('U', X, F), ('T', X, F)],
         [[(4, 4)], ('4', X, F), ('4', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('U', X, F), ('T', X, F)],
         [[(5, 5)], ('4', X, F), ('4', X, F), ('5', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('U', X, F), ('T', X, F)],
         [[(6, 6)], ('4', X, F), ('4', X, F), ('5', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('U', Y, F), ('T', Y, F)],
         [[(7, 7)], ('4', X, F), ('5', X, F), ('5', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('U', X, F), ('T', X, F)],
         [[(5, 5)], ('4', X, F), ('5', X, F), ('6', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('U', X, F), ('T', X, F)],
         [[(10, 10)], ('4', X, F), ('5', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('U', Y, F), ('T', Y, F)],
         [[(10, 10)], ('4', X, F), ('5', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('T', B, F), ('U', X, F)],
         [[(3, 3)], ('5', X, F), ('', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('T', B, F), ('U', X, F)],
         [[(4, 4)], ('5', X, F), ('5', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('T', B, F), ('U', X, F)],
         [[(5, 5)], ('5', X, F), ('5', X, F), ('6', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('T', B, F), ('U', X, F)],
         [[(10, 10)], ('5', X, F), ('5', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('T', B, F), ('U', Y, F)],
         [[(10, 10)], ('5', X, F), ('5', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('T', B, F), ('U', B, F)],
         [[(3, 3)], ('6', X, F), ('', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('T', B, F), ('U', B, F)],
         [[(12, 12)], ('', X, F), ('', X, F), ('', X, F), ('G', B, F), ('I', B, F), ('N', B, F), ('R', B, F), ('T', B, F), ('U', B, F)],
         ]
    tex = '\\begin{overprint}\n'
    for i, row in enumerate(A):
        highlight = row[0]
        a = row[1:]
        tex += '\onslide<%d|handout:%d>\n' %(i + 1, i + 1)
        tex += '\\begin{center}\n'
        tex += slideutils.code_highlight('java', CODE, highlight, fullsize = False)
        tex += '\end{center}\n'
        tex += '\\begin{center}\n'
        tex += slideutils.trace(9, VARS, a)
        tex += '\end{center}\n'
    tex += '\end{overprint}\n'
    return tex

def main(args):
    #print(trace1())
    print(trace2())

if __name__ == '__main__':
    main(sys.argv[1:])
